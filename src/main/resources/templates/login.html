<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Login - Personal Trainer</title>
</head>
<body>
<h1>Login to Personal Trainer</h1>

<!-- Error/Success Messages -->
<div th:if="${param.error}" style="color:red;">
    <p>Invalid username or password.</p>
</div>
<div th:if="${param.logout}">
    <p>You have been logged out.</p>
</div>

<h2>Login with Email</h2>
<!-- Form now posts to /login (matches SecurityConfig) -->
<form method="post" th:action="@{/login}">
    <!-- CSRF token (required by Spring Security) -->
    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />

    <label>Email:
        <input type="email" name="username" required /> <!-- name="username! is mandatory -->
    </label><br/><br/>

    <label>Password:
        <input type="password" name="password" required />
    </label><br/><br/>

    <button type="submit">Login</button>
</form>

<h2>Or login with:</h2>
<!-- Fixed: buttons inside <a> is invalid HTML -->
<a href="/oauth2/authorization/google"><button type="button">Google</button></a>
<a href="/oauth2/authorization/facebook"><button type="button">Facebook</button></a>
<a href="/oauth2/authorization/microsoft"><button type="button">Microsoft</button></a>
</body>
</html>
